<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    tr:nth-child(even) {
  background-color: #2e2649;
}
tr:nth-child(odd) {
  background-color: #423b5b;
}
th {
  background-color: #342F44;
  color: white;
  padding: 10px;
}
td {
    color:white;
    border:none !important;
    padding: 10px;
}
</style>
<body>
    <table id="table">
    </table>
    <div id="list-container"></div>
    <script>

    const table = document.getElementById("table");
    function setDBList(items) {        
                // 테이블 헤더 생성
        var thead = document.createElement('thead');
        var trHead = document.createElement('tr');

        // 테이블 헤더에 속성 이름 추가 (첫 번째 아이템 기준)
        for (var prop in items[0]) {
            if (items[0].hasOwnProperty(prop)) {
                var th = document.createElement('th');
                th.textContent = prop;
                trHead.appendChild(th);
            }
        }

        thead.appendChild(trHead);
        table.appendChild(thead);

        // 테이블 바디 생성
        var tbody = document.createElement('tbody');

        // 배열의 각 아이템을 테이블 행으로 추가
        for (var i = 0; i < items.length; i++) {
        var tr = document.createElement('tr');
        for (var prop in items[i]) {
            if (items[i].hasOwnProperty(prop)) {
                var td = document.createElement('td');
                td.textContent = items[i][prop];
                tr.appendChild(td);
                }
            }
        tbody.appendChild(tr);
        }

    table.appendChild(tbody);
    };
    

    function printList() {
        fetch("./dbserv", {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json())
            .then(data => {
                console.log(data);        
                setDBList(data.list);
            })
            .catch(error => {
                console.error('Error:', error);
        });
    };
    printList();
    </script>
</body>
</html>